<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scope Manager â€” í™”ë©´ í”Œë¡œìš° ë§µ</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Apple SD Gothic Neo','Pretendard',sans-serif;background:#0f1117;color:#e8eaf0;font-size:13px;min-height:100vh;}

/* Header */
.header{padding:18px 24px 14px;border-bottom:1px solid #1e2533;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;}
.logo{font-size:16px;font-weight:800;}
.logo b{color:#4f80ff;}
.logo span{font-size:11px;color:#5a6478;font-weight:400;margin-left:10px;}
.btns{display:flex;gap:6px;}
.btn{padding:5px 14px;border-radius:6px;font-size:11px;font-weight:700;cursor:pointer;border:1px solid #2e3748;background:none;color:#8c95aa;transition:.15s;}
.btn.active{background:#4f80ff;border-color:#4f80ff;color:#fff;}
.btn:hover:not(.active){color:#fff;border-color:#4f80ff;}

/* Persona bar */
.persona-bar{padding:12px 24px;border-bottom:1px solid #1e2533;display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
.persona-bar.hidden{display:none;}
.p-label{font-size:11px;color:#5a6478;}
.p-btn{padding:5px 16px;border-radius:20px;font-size:12px;font-weight:700;cursor:pointer;border:1px solid #2e3748;background:none;color:#8c95aa;transition:.15s;}
.p-btn.active{background:rgba(79,128,255,.15);border-color:#4f80ff;color:#4f80ff;}
.p-info{font-size:11px;color:#5a6478;margin-left:4px;}
.p-info b{color:#4f80ff;}

/* Main */
.main{padding:28px 24px 16px;overflow-x:auto;}

/* Flow row */
.flow-row{display:flex;align-items:center;gap:0;min-width:860px;margin-bottom:28px;}

/* Screen node */
.screen{flex:0 0 152px;background:#1a1f2e;border:2px solid #232b3e;border-radius:12px;padding:15px 13px;cursor:pointer;transition:.2s;position:relative;}
.screen:hover{border-color:#4f80ff50;box-shadow:0 4px 20px rgba(79,128,255,.1);}
.screen.active{border-color:var(--c) !important;box-shadow:0 0 0 3px color-mix(in srgb,var(--c) 20%,transparent);}
.screen.dimmed{opacity:.25;}
.screen-num{font-size:9px;font-weight:700;letter-spacing:1px;margin-bottom:4px;}
.screen-icon{font-size:22px;margin-bottom:7px;}
.screen-name{font-size:14px;font-weight:800;color:#fff;margin-bottom:5px;}
.screen-desc{font-size:11px;color:#8c95aa;line-height:1.5;}
.dot-active{position:absolute;top:8px;right:8px;width:8px;height:8px;border-radius:50%;background:var(--c);display:none;}
.screen.persona-on .dot-active{display:block;}

/* Arrow */
.arrow{flex:0 0 38px;display:flex;flex-direction:column;align-items:center;gap:3px;transition:.2s;}
.arrow.dimmed{opacity:.15;}
.arrow-line{width:100%;height:2px;background:linear-gradient(90deg,#2e3748,#4f80ff50);position:relative;}
.arrow-head{position:absolute;right:-5px;top:-6px;font-size:13px;color:#4f80ff;}
.arrow-label{font-size:9px;color:#5a6478;text-align:center;line-height:1.3;white-space:nowrap;}

/* Branch */
.branch-row{background:#1a1f2e;border:1px solid #232b3e;border-radius:10px;padding:12px 16px;margin-bottom:20px;display:flex;align-items:flex-start;gap:12px;flex-wrap:wrap;min-width:860px;}
.branch-title{font-size:11px;color:#5a6478;font-weight:700;white-space:nowrap;margin-top:2px;}
.branch-item{display:flex;align-items:center;gap:5px;transition:.2s;}
.branch-item.dimmed{opacity:.2;}
.branch-from,.branch-to{font-size:11px;font-weight:700;}
.branch-arrow{font-size:11px;color:#5a6478;}
.branch-tag{font-size:10px;color:#3a4258;background:#1e2533;border-radius:4px;padding:1px 6px;}

/* Detail panel */
.detail{background:#1a1f2e;border-radius:10px;padding:16px 18px;margin-bottom:18px;border-left:4px solid var(--c);display:none;}
.detail.show{display:block;}
.detail-head{display:flex;align-items:center;gap:10px;margin-bottom:12px;}
.detail-icon{font-size:22px;}
.detail-name{font-size:15px;font-weight:800;color:#fff;}
.detail-desc{font-size:12px;color:#8c95aa;}
.steps{display:flex;gap:8px;flex-wrap:wrap;}
.step{display:flex;align-items:center;gap:8px;background:#0f1117;border-radius:8px;padding:8px 12px;}
.step-num{width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:800;color:#fff;flex-shrink:0;background:var(--c);}
.step-text{font-size:12px;color:#c5cbd8;}

/* Metrics */
.metrics{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:8px;min-width:860px;}
.mc{background:#1a1f2e;border-radius:8px;padding:12px 14px;}
.mc-icon{font-size:18px;margin-bottom:4px;}
.mc-num{font-size:9px;font-weight:700;letter-spacing:1px;margin-bottom:4px;}
.mc-val{font-size:13px;font-weight:700;color:#fff;}

.hint{margin-top:14px;font-size:11px;color:#3a4258;text-align:right;}

@media(max-width:680px){
  .metrics{grid-template-columns:repeat(2,1fr);}
}
</style>
</head>
<body>

<div class="header">
  <div class="logo"><b>Scope</b>Manager <span>í™”ë©´ í”Œë¡œìš° ë§µ</span></div>
  <div class="btns">
    <button class="btn active" onclick="setMode('flow',this)">ğŸ—º í”Œë¡œìš°</button>
    <button class="btn" onclick="setMode('persona',this)">ğŸ‘¤ í˜ë¥´ì†Œë‚˜</button>
  </div>
</div>

<div class="persona-bar hidden" id="persona-bar">
  <span class="p-label">í˜ë¥´ì†Œë‚˜ ì„ íƒ:</span>
  <button class="p-btn" onclick="selectPersona(0,this)">ğŸ‘©â€ğŸ’¼ ì—ì´ì „ì‹œ PM</button>
  <button class="p-btn" onclick="selectPersona(1,this)">ğŸ¢ ëŒ€í‘œ (PM ê²¸ì§)</button>
  <span class="p-info" id="p-info"></span>
</div>

<div class="main">
  <!-- Flow row -->
  <div class="flow-row" id="flow-row"></div>

  <!-- Branch row -->
  <div class="branch-row" id="branch-row"></div>

  <!-- Detail panel -->
  <div class="detail" id="detail-panel"></div>

  <!-- Metrics -->
  <div class="metrics" id="metrics-row"></div>

  <div class="hint">í™”ë©´ì„ í´ë¦­í•˜ë©´ ì„¸ë¶€ ìŠ¤í…ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ Â· í˜ë¥´ì†Œë‚˜ ëª¨ë“œì—ì„œ ì‚¬ìš© ê²½ë¡œë¥¼ í™•ì¸í•˜ì„¸ìš”</div>
</div>

<script>
const screens = [
  { id:"onboarding", label:"ì˜¨ë³´ë”©", icon:"ğŸš€", color:"#4f80ff", desc:"í”„ë¡œì íŠ¸ ë“±ë¡ & ê³„ì•½ ë²”ìœ„ ì„¤ì •", steps:["ì—ì´ì „ì‹œ ì •ë³´ ì…ë ¥","í”„ë¡œì íŠ¸ ìƒì„±","ê³„ì•½ì„œ ê¸°ë°˜ ë²”ìœ„ ì •ì˜","íŒ€ì› ì´ˆëŒ€"] },
  { id:"daily",      label:"ì¼ì¼ ì…ë ¥", icon:"â±", color:"#a855f7", desc:"3ë²„íŠ¼ Â· 1ë¶„ ê³¼ì—… ë³€ê²½ ì´ë ¥ ê¸°ë¡", steps:["ì˜¤ëŠ˜ì˜ ìš”ì²­ ìˆ˜ì‹  ì—¬ë¶€","ë²”ìœ„ ë‚´ / ë²”ìœ„ ì™¸ / ë³´ë¥˜ ì„ íƒ","ë©”ëª¨ ì…ë ¥ (ì„ íƒ)","ì´ë ¥ ìë™ ëˆ„ì "] },
  { id:"analysis",   label:"AI íŒì •", icon:"ğŸ¤–", color:"#06b6d4", desc:"ì‹œìŠ¤í…œì´ ë²”ìœ„ ì´ˆê³¼ ì—¬ë¶€ë¥¼ íŒì •", steps:["ìš”ì²­ ë‚´ìš© AI ë¶„ì„","ê³„ì•½ ë²”ìœ„ì™€ ëŒ€ì¡°","ì´ˆê³¼ ì—¬ë¶€ íŒì • ê²°ê³¼ ìƒì„±","ê·¼ê±° ë¬¸ì„œ ìë™ ì‘ì„±"] },
  { id:"report",     label:"ë²”ìœ„ ì´ˆê³¼ ë¦¬í¬íŠ¸", icon:"ğŸ“„", color:"#f59e0b", desc:"'ê¸°ê³„ê°€ ë§í•˜ëŠ”' ì²­êµ¬ ê·¼ê±° ìë™ ìƒì„±", steps:["ëˆ„ì  ì´ë ¥ ê¸°ë°˜ ë¦¬í¬íŠ¸ ìƒì„±","ì´ˆê³¼ í•­ëª© ëª©ë¡í™”","ì˜ˆìƒ ì¶”ê°€ ë¹„ìš© ì‚°ì¶œ","ê³µìœ ìš© PDF/ë§í¬ ì¶œë ¥"] },
  { id:"dashboard",  label:"ì†ìµ ëŒ€ì‹œë³´ë“œ", icon:"ğŸ“Š", color:"#10b981", desc:"í”„ë¡œì íŠ¸ë³„ ì‹¤ì œ ì†ìµ ê°€ì‹œí™”", steps:["í”„ë¡œì íŠ¸ë³„ ìˆ˜ìµ í˜„í™©","ì²­êµ¬ ì„±ê³µ/ì‹¤íŒ¨ ì¶”ì ","ì›”ë³„ ì†ìµ ì¶”ì´ ì°¨íŠ¸","íŒ€ ì„±ê³¼ ìš”ì•½"] },
];

const flows = [
  { from:"onboarding", to:"daily",     label:"í”„ë¡œì íŠ¸ ì…‹ì—… ì™„ë£Œ" },
  { from:"daily",      to:"analysis",  label:"ìš”ì²­ ë°œìƒ ì‹œ" },
  { from:"analysis",   to:"report",    label:"ì´ˆê³¼ íŒì • ì‹œ" },
  { from:"report",     to:"dashboard", label:"ì²­êµ¬ ì‹œë„ í›„" },
  { from:"daily",      to:"dashboard", label:"ë²”ìœ„ ë‚´ ìš”ì²­" },
];

const personas = [
  { role:"ì—ì´ì „ì‹œ PM", path:["onboarding","daily","analysis","report","dashboard"] },
  { role:"ëŒ€í‘œ (PM ê²¸ì§)", path:["onboarding","dashboard","report"] },
];

let mode = "flow";
let activePersona = null;
let activeScreen = null;

function setMode(m, btn) {
  mode = m;
  activePersona = null;
  activeScreen = null;
  document.querySelectorAll('.btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('persona-bar').classList.toggle('hidden', m !== 'persona');
  document.querySelectorAll('.p-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('p-info').innerHTML = '';
  render();
}

function selectPersona(idx, btn) {
  const same = activePersona && personas[idx].role === activePersona.role;
  activePersona = same ? null : personas[idx];
  activeScreen = null;
  document.querySelectorAll('.p-btn').forEach(b=>b.classList.remove('active'));
  if (!same) {
    btn.classList.add('active');
    document.getElementById('p-info').innerHTML = `â†’ ì‚¬ìš© í™”ë©´: <b>${activePersona.path.length}ê°œ</b>`;
  } else {
    document.getElementById('p-info').innerHTML = '';
  }
  render();
}

function toggleScreen(id) {
  activeScreen = activeScreen === id ? null : id;
  render();
}

function isOn(id) {
  if (!activePersona) return true;
  return activePersona.path.includes(id);
}

function render() {
  renderFlow();
  renderBranch();
  renderDetail();
  renderMetrics();
}

function renderFlow() {
  const row = document.getElementById('flow-row');
  row.innerHTML = '';
  screens.forEach((s, i) => {
    const on = isOn(s.id);
    const sel = activeScreen === s.id;

    const node = document.createElement('div');
    node.className = 'screen' + (sel?' active':'') + (!on?' dimmed':'') + (activePersona&&on?' persona-on':'');
    node.style.cssText = `--c:${s.color};border-top:4px solid ${s.color};`;
    node.onclick = () => toggleScreen(s.id);
    node.innerHTML = `
      <div class="dot-active"></div>
      <div class="screen-num" style="color:${s.color}">SCREEN 0${i+1}</div>
      <div class="screen-icon">${s.icon}</div>
      <div class="screen-name">${s.label}</div>
      <div class="screen-desc">${s.desc}</div>
    `;
    row.appendChild(node);

    if (i < screens.length - 1) {
      const nextOn = isOn(screens[i+1].id);
      const f = flows.find(f=>f.from===s.id && f.to===screens[i+1].id);
      const arr = document.createElement('div');
      arr.className = 'arrow' + (!on||!nextOn?' dimmed':'');
      arr.innerHTML = `
        <div class="arrow-line"><span class="arrow-head">â–¶</span></div>
        <div class="arrow-label">${f?f.label:''}</div>
      `;
      row.appendChild(arr);
    }
  });
}

function renderBranch() {
  const row = document.getElementById('branch-row');
  row.innerHTML = '<span class="branch-title">ğŸ”€ ë¶„ê¸° íë¦„</span>';
  flows.forEach(f => {
    const fromS = screens.find(s=>s.id===f.from);
    const toS   = screens.find(s=>s.id===f.to);
    const active = !activePersona || (activePersona.path.includes(f.from) && activePersona.path.includes(f.to));
    const el = document.createElement('div');
    el.className = 'branch-item' + (!active?' dimmed':'');
    el.innerHTML = `
      <span class="branch-from" style="color:${fromS.color}">${fromS.icon} ${fromS.label}</span>
      <span class="branch-arrow">â†’</span>
      <span class="branch-to" style="color:${toS.color}">${toS.icon} ${toS.label}</span>
      <span class="branch-tag">${f.label}</span>
    `;
    row.appendChild(el);
  });
}

function renderDetail() {
  const panel = document.getElementById('detail-panel');
  if (!activeScreen) { panel.classList.remove('show'); return; }
  const s = screens.find(x=>x.id===activeScreen);
  panel.style.cssText = `--c:${s.color};border-left-color:${s.color};`;
  panel.innerHTML = `
    <div class="detail-head">
      <span class="detail-icon">${s.icon}</span>
      <div><div class="detail-name">${s.label}</div><div class="detail-desc">${s.desc}</div></div>
    </div>
    <div class="steps">
      ${s.steps.map((st,i)=>`
        <div class="step" style="--c:${s.color};border:1px solid ${s.color}30;">
          <div class="step-num">${i+1}</div>
          <div class="step-text">${st}</div>
        </div>`).join('')}
    </div>
  `;
  panel.classList.add('show');
}

function renderMetrics() {
  const row = document.getElementById('metrics-row');
  const mcs = [
    { icon:"ğŸ“ˆ", num:"ì§€í‘œ 01", val:"ì²­êµ¬ ì‹œë„ ê±´ìˆ˜", color:"#4f80ff" },
    { icon:"ğŸ”", num:"ì§€í‘œ 02", val:"ì¼ ì…ë ¥ ì™„ë£Œìœ¨", color:"#a855f7" },
    { icon:"ğŸ”", num:"ì§€í‘œ 03", val:"ì´ˆê³¼ ê°ì§€ ê±´ìˆ˜/ì›”", color:"#06b6d4" },
    { icon:"â­", num:"ì§€í‘œ â˜…",  val:"ì²­êµ¬ ì„±ê³µë¥ ", color:"#10b981" },
  ];
  row.innerHTML = mcs.map(m=>`
    <div class="mc" style="border-top:3px solid ${m.color};border:1px solid ${m.color}30;border-top:3px solid ${m.color};">
      <div class="mc-icon">${m.icon}</div>
      <div class="mc-num" style="color:${m.color}">${m.num}</div>
      <div class="mc-val">${m.val}</div>
    </div>`).join('');
}

render();
</script>
</body>
</html>
